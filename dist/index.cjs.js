"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),p=require("react"),E=require("@emotion/styled"),f=p.createContext(null);function y({children:e,initialFields:a=[],initialSort:t=null}){const[s,l]=p.useState(a),[r,c]=p.useState(t),u=p.useCallback(m=>{l(m)},[]),o=p.useCallback(m=>{c(m)},[]),d=p.useCallback((m,h)=>{const N=s.map(j=>j.id===m?{...j,...h}:j);l(N)},[s]),i=p.useCallback(m=>s.find(h=>h.id===m),[s]),b=p.useMemo(()=>({fields:s,setFields:u,sort:r,setSort:o,getField:i,updateField:d}),[s,u,r,o,d,i]);return n.jsx(f.Provider,{value:b,children:e})}y.displayName="DataTableProvider";function M(e){var a,t,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(a=0;a<l;a++)e[a]&&(t=M(e[a]))&&(s&&(s+=" "),s+=t)}else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function x(){for(var e,a,t=0,s="",l=arguments.length;t<l;t++)(e=arguments[t])&&(a=M(e))&&(s&&(s+=" "),s+=a);return s}const F=E.table`
    --table-sticky-top: ${e=>e.sticky?"0":void 0};

    thead {
        tr:nth-of-type(1) td,
        tr:nth-of-type(1) th {
            top: var(--table-sticky-top, unset);
            position: ${e=>e.sticky?"sticky":"unset"};
            z-index: ${e=>e.sticky?10:"unset"};
            background: ${e=>e.sticky?"linear-gradient(var(--bs-table-bg) 75%, rgba(var(--bs-secondary-bg-rgb), 0.9))":"unset"};
        }
    }
`;function _({sticky:e,responsive:a,children:t,className:s,ref:l,...r}){if(a){const c=x(s,{"table-responsive":a===!0,[`table-responsive-${a}`]:a!==!0});return n.jsx("div",{className:c,children:n.jsx(F,{ref:l,...r,children:t})})}return n.jsx(F,{className:s,sticky:e,ref:l,...r,children:t})}function v({field:e,className:a,children:t,...s}){if(e.visible===!1)return null;const l=x({[`text-${e.align}`]:!!e.align},a);return n.jsx("th",{className:l,scope:"col",...s,children:t??e.title})}v.displayName="DataTableTH";function T(){const e=p.useContext(f);if(!e)throw new Error("useTableContext must be used within a DataTableProvider");return[e.fields,e.setFields]}function q({...e}){const[a]=T();return n.jsx("thead",{...e,children:n.jsx("tr",{children:a.map((t,s)=>n.jsx(v,{...t.thProps,field:t,className:x(typeof t.className=="function"?{[`text-${t.align}`]:!!t.align}:t.className)},String(t.id??s)))})})}q.displayName="DataTableHead";function D({className:e,size:a,responsive:t,sticky:s,data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:o,selected:d,tableHeadProps:i,children:b,tfoot:m,...h}){const N=x("table",e,{[`table-${a}`]:!!a});return n.jsxs(_,{sticky:s,responsive:t,className:N,...h,children:[n.jsx(C,{}),n.jsx(q,{...i}),!!l.length&&n.jsx(S,{data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:o,selected:d}),b,m]})}D.displayName="DataTable";function B({fields:e,...a}){return n.jsx(y,{initialFields:e,children:n.jsx(D,{...a})})}B.displayName="StandaloneDataTable";function k({field:e,row:a,className:t,as:s,...l}){if(e.visible===!1)return null;const r=x({[`text-${e.align}`]:!!e.align},t,typeof e.className=="function"?e.className(a):e.className);return p.createElement(s??e.as??"td",{className:r,scope:(s??e.as)==="th"?"row":void 0,colSpan:e.colSpan,...e.cellProps,...l},a[e.field]===void 0&&!e.render?null:typeof e.render=="function"?e.render(a):a[e.field])}k.displayName="DataTableCell";function $({className:e,rowClassName:a,selected:t,row:s,trRef:l,onClick:r,...c}){const[u]=T(),o=i=>{r?.(s,i)},d=typeof a=="function"?a(s):a;return s?n.jsx("tr",{ref:l,className:x({"table-active":t},e,d),onClick:o,...c,children:u.map((i,b)=>n.jsx(k,{field:i,row:s},String(i?.id??b)))}):null}$.displayName="DataTableRow";function W({fields:e,className:a,rowClassName:t,selected:s,row:l,trRef:r,onClick:c,...u}){const o=i=>{c?.(l,i)},d=typeof t=="function"?t(l):t;return l?n.jsx("tr",{ref:r,className:x({"table-active":s},a,d),onClick:o,...u,children:e.map((i,b)=>n.jsx(k,{field:i,row:l},String(i?.id??b)))}):null}W.displayName="StandaloneDataTableRow";function S({data:e,keyField:a,rowClassName:t,renderRow:s,onSelectRow:l,selected:r="",children:c,...u}){return n.jsxs("tbody",{...u,children:[e.map(o=>{const d=String(typeof a=="function"?a(o):o[a]),i=typeof r=="function"?r(o):d===r;return s?s(o):n.jsx($,{onClick:l,rowClassName:t,row:o,selected:i},d)}),c]})}S.displayName="DataTableTBody";function g(){const e=p.useContext(f);if(!e)throw new Error("useTableSort must be used within a DataTableProvider");return[e.sort,e.setSort]}const I=e=>e?e==="end"?"flex-end":"center":"flex-start",J=E.div`
    display: flex;
    width: 100%;
    flex-direction: ${e=>e.align==="end"?"row-reverse":"row"};
    justify-content: ${e=>I(e.align)};

    .sort-icon {
        flex-grow: ${e=>e.align==="end"?"1":"0"};
        opacity: ${e=>e.sorted?1:0};
    }

    &:hover .sort-icon {
        color: ${e=>e.sorted?"unset":"var(--bs-primary)"};
        opacity: 0.75;
        transition: opacity 0.2s;
    }
`;function H({field:e,sorted:a,ascending:t,className:s,onClick:l}){if(e.visible===!1)return null;if(!e.sortable)return n.jsx(v,{field:e,className:s});const{className:r,...c}=e.thProps??{},u=x(s,r,{[`text-${e.align}`]:!!e.align}),o=()=>{l({field:e.field,ascending:a?!t:!0})},d={"bi-arrow-down":t,"bi-arrow-up":!t};return n.jsx("th",{...c,className:x("sortable",u),scope:"col",onClick:o,children:n.jsxs(J,{sorted:a,align:e.align,children:[n.jsx("div",{className:"field-title",children:e.title}),n.jsx("div",{className:x("me-1 sort-icon",d)})]})})}H.displayName="SortableTableTH";function w({onChangeSort:e}){const[a]=T(),[t]=g();return n.jsx("thead",{children:n.jsx("tr",{children:a.map((s,l)=>n.jsx(H,{field:s,sorted:t?.field===s.field,ascending:t?.ascending,className:x(typeof s.className=="function"?{[`text-${s.align}`]:!!s.align}:s.className),onClick:e},l))})})}w.displayName="SortableTableHead";function A({onChangeSort:e}){const[a]=T(),[t]=g();return n.jsx(w,{fields:a,currentSort:t,onChangeSort:e})}A.displayName="SortableTableHeadWrapper";function P({className:e,size:a,responsive:t,sticky:s,data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:o,selected:d,tableHeadProps:i,children:b,tfoot:m,onChangeSort:h,...N}){const j=x("table",e,{[`table-${a}`]:!!a});return n.jsxs(_,{className:j,responsive:t,sticky:s,...N,children:[n.jsx(C,{}),n.jsx(A,{onChangeSort:h,...i}),!!l.length&&n.jsx(S,{data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:o,selected:d}),b,m]})}P.displayName="SortableTable";function L({nextSort:e}){const[,a]=g();return p.useEffect(()=>{console.log("setNextSort",e),a(e)},[e,a]),null}function V({fields:e,currentSort:a,...t}){return n.jsxs(y,{initialFields:e,initialSort:a,children:[n.jsx(L,{nextSort:a}),n.jsx(P,{...t})]})}V.displayName="StandaloneSortableTable";const O=[10,25,50,100,250,500,1e3];function R({value:e,pageValues:a=O,size:t,label:s,className:l,onChange:r,...c}){const u=p.useId(),o=b=>r(Number(b.target.value)),d=l??x("form-select",{[`form-select-${t}`]:!!t}),i=x("input-group",{[`input-group-${t}`]:!!t});return n.jsxs("div",{className:i,children:[n.jsx("label",{className:"input-group-text",htmlFor:u,children:s??"Rows"}),n.jsx("select",{className:d,id:u,value:e,onChange:o,...c,children:a.map(b=>n.jsx("option",{value:b,children:b},b))})]},e)}R.displayName="RowsPerPage";function G({page:e,rowsPerPage:a,onChangePage:t,count:s,size:l,showFirst:r,showLast:c,className:u,rowsPerPageProps:o,...d}){const i=s===0?0:e*a+1,b=Math.min(e*a+a,s),m=a===0?0:Math.floor((s-1)/a),h=x("btn btn-link",{[`btn-${l}`]:!!l});return n.jsxs("div",{className:x("row g-3 justify-content-end",u),...d,children:[!!o&&n.jsx("div",{className:"col-auto",children:n.jsx(R,{...o,value:a,size:l})}),n.jsx("div",{className:"col-auto",children:n.jsxs("div",{className:"row g-3 flex-nowrap align-items-baseline",children:[n.jsxs("div",{className:"col-auto",children:[i,"-",b," of ",s]}),r&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:h,disabled:e===0,onClick:()=>t(0),"aria-label":"First page",children:n.jsx("span",{className:"bi-chevron-bar-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:h,disabled:e===0,onClick:()=>t(e-1),"aria-label":"Previous page",children:n.jsx("span",{className:"bi-chevron-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:h,disabled:e>=m,onClick:()=>t(e+1),"aria-label":"Next page",children:n.jsx("span",{className:"bi-chevron-right","aria-hidden":"true"})})}),c&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:h,disabled:e>=m,onClick:()=>t(m),"aria-label":"Last page",children:n.jsx("span",{className:"bi-chevron-bar-right","aria-hidden":"true"})})})]})})]})}G.displayname="TablePagination";function C(){const[e]=T();return n.jsx("colgroup",{children:e.filter(a=>a.visible!==!1).map((a,t)=>n.jsx("col",{className:a.colClassName,span:a.colSpan??1},t))})}C.displayName="DataTableCols";function K(e){const a=p.useContext(f);if(!a)throw new Error("useField must be used within a DataTableProvider");return[a.fields.find(t=>t.id===e)??null,a.updateField]}function Q(){const e=p.useContext(f);if(!e)throw new Error("useTableContext must be used within a DataTableProvider");return e}exports.DataTable=B;exports.DataTableCols=C;exports.DataTableContext=f;exports.DataTableProvider=y;exports.DataTableRow=$;exports.DataTableTBody=S;exports.DataTableTH=v;exports.DataTableWithContext=D;exports.RowsPerPage=R;exports.SortableTable=P;exports.SortableTableHead=w;exports.SortableTableTH=H;exports.StandaloneDataTableRow=W;exports.StandaloneSortableTable=V;exports.TablePagination=G;exports.useField=K;exports.useTableContext=Q;exports.useTableFields=T;exports.useTableSort=g;
//# sourceMappingURL=index.cjs.js.map
