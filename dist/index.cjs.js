"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),h=require("react"),S=require("@emotion/styled"),T=h.createContext(null);function y({children:a,initialFields:t=[],initialSort:s=null}){const[e,l]=h.useState(t),[o,i]=h.useState(s),c=h.useCallback(x=>{l(x)},[]),r=h.useCallback(x=>{i(x)},[]),u=h.useCallback((x,p)=>{const N=e.map(j=>j.id===x?{...j,...p}:j);l(N)},[e]),d=h.useCallback(x=>e.find(p=>p.id===x),[e]),m=h.useMemo(()=>({fields:e,setFields:c,sort:o,setSort:r,getField:d,updateField:u}),[e,c,o,r,u,d]);return n.jsx(T.Provider,{value:m,children:a})}y.displayName="DataTableProvider";function R(a){var t,s,e="";if(typeof a=="string"||typeof a=="number")e+=a;else if(typeof a=="object")if(Array.isArray(a)){var l=a.length;for(t=0;t<l;t++)a[t]&&(s=R(a[t]))&&(e&&(e+=" "),e+=s)}else for(s in a)a[s]&&(e&&(e+=" "),e+=s);return e}function b(){for(var a,t,s=0,e="",l=arguments.length;s<l;s++)(a=arguments[s])&&(t=R(a))&&(e&&(e+=" "),e+=t);return e}const F=S.table`
    --table-sticky-top: ${a=>a.sticky?"0":void 0};

    thead {
        tr:nth-of-type(1) td,
        tr:nth-of-type(1) th {
            top: var(--table-sticky-top, unset);
            position: ${a=>a.sticky?"sticky":"unset"};
            z-index: ${a=>a.sticky?10:"unset"};
            background: ${a=>a.sticky?"linear-gradient(var(--bs-table-bg) 75%, rgba(var(--bs-secondary-bg-rgb), 0.9))":"unset"};
        }
    }
`;function E({sticky:a,responsive:t,children:s,className:e,ref:l,...o}){if(t){const i=b(e,{"table-responsive":t===!0,[`table-responsive-${t}`]:t!==!0});return n.jsx("div",{className:i,children:n.jsx(F,{ref:l,...o,children:s})})}return n.jsx(F,{className:e,sticky:a,ref:l,...o,children:s})}function v({field:a,className:t,children:s,...e}){const l=b({[`text-${a.align}`]:!!a.align},t);return n.jsx("th",{className:l,scope:"col",...e,children:s??a.title})}v.displayName="DataTableTH";function f(){const a=h.useContext(T);if(!a)throw new Error("useTableContext must be used within a DataTableProvider");return[a.fields,a.setFields]}function M({...a}){const[t]=f();return n.jsx("thead",{...a,children:n.jsx("tr",{children:t.map((s,e)=>n.jsx(v,{...s.thProps,field:s,className:b(typeof s.className=="function"?{[`text-${s.align}`]:!!s.align}:s.className)},String(s.id??e)))})})}M.displayName="DataTableHead";function D({className:a,size:t,responsive:s,sticky:e,data:l,keyField:o,rowClassName:i,renderRow:c,onSelectRow:r,selected:u,tableHeadProps:d,children:m,tfoot:x,...p}){const N=b("table",a,{[`table-${t}`]:!!t});return n.jsxs(E,{sticky:e,responsive:s,className:N,...p,children:[n.jsx(C,{}),n.jsx(M,{...d}),!!l.length&&n.jsx(g,{data:l,keyField:o,rowClassName:i,renderRow:c,onSelectRow:r,selected:u}),m,x]})}D.displayName="DataTable";function q({fields:a,...t}){return n.jsx(y,{initialFields:a,children:n.jsx(D,{...t})})}q.displayName="StandaloneDataTable";function B({field:a,row:t,className:s,as:e,...l}){const o=b({[`text-${a.align}`]:!!a.align},s,typeof a.className=="function"?a.className(t):a.className);return h.createElement(e??a.as??"td",{className:o,scope:(e??a.as)==="th"?"row":void 0,colSpan:a.colSpan,...a.cellProps,...l},t[a.field]===void 0&&!a.render?null:typeof a.render=="function"?a.render(t):t[a.field])}B.displayName="DataTableCell";function k({className:a,rowClassName:t,selected:s,row:e,trRef:l,onClick:o,...i}){const[c]=f(),r=d=>{o?.(e,d)},u=typeof t=="function"?t(e):t;return e?n.jsx("tr",{ref:l,className:b({"table-active":s},a,u),onClick:r,...i,children:c.map((d,m)=>n.jsx(B,{field:d,row:e},String(d?.id??m)))}):null}k.displayName="DataTableRow";function g({data:a,keyField:t,rowClassName:s,renderRow:e,onSelectRow:l,selected:o="",children:i,...c}){return n.jsxs("tbody",{...c,children:[a.map(r=>{const u=String(typeof t=="function"?t(r):r[t]),d=typeof o=="function"?o(r):u===o;return e?e(r):n.jsx(k,{onClick:l,rowClassName:s,row:r,selected:d},u)}),i]})}g.displayName="DataTableTBody";const G=a=>{if(!a)return"flex-start";switch(a){case"end":return"flex-end";default:return"center"}},I=S.div`
    display: flex;
    width: 100%;
    flex-direction: ${a=>a.align==="end"?"row-reverse":"row"};
    justify-content: ${a=>G(a.align)};

    .sort-icon {
        flex-grow: ${a=>a.align==="end"?"1":"0"};
        opacity: ${a=>a.sorted?1:0};
    }

    &:hover .sort-icon {
        color: ${a=>a.sorted?"unset":"var(--bs-primary)"};
        opacity: 0.75;
        transition: opacity 0.2s;
    }
`;function $({field:a,sorted:t,ascending:s,className:e,onClick:l}){if(!a.sortable)return n.jsx(v,{field:a,className:e});const{className:o,...i}=a.thProps??{},c=b(e,o,{[`text-${a.align}`]:!!a.align}),r=()=>{l({field:a.field,ascending:t?!s:!0})},u={"bi-arrow-down":s,"bi-arrow-up":!s};return n.jsx("th",{...i,className:b("sortable",c),scope:"col",onClick:r,children:n.jsxs(I,{sorted:t,align:a.align,children:[n.jsx("div",{className:"field-title",children:a.title}),n.jsx("div",{className:b("me-1 sort-icon",u)})]})})}$.displayName="SortableTableTH";function _(){const a=h.useContext(T);if(!a)throw new Error("useTableSort must be used within a DataTableProvider");return[a.sort,a.setSort]}function H({onChangeSort:a}){const[t]=f(),[s]=_();return n.jsx("thead",{children:n.jsx("tr",{children:t.map((e,l)=>n.jsx($,{field:e,sorted:s?.field===e.field,ascending:s?.ascending,className:b(typeof e.className=="function"?{[`text-${e.align}`]:!!e.align}:e.className),onClick:a},l))})})}H.displayName="SortableTableHead";function w({className:a,size:t,responsive:s,sticky:e,data:l,keyField:o,rowClassName:i,renderRow:c,onSelectRow:r,selected:u,tableHeadProps:d,children:m,tfoot:x,onChangeSort:p,...N}){const j=b("table",a,{[`table-${t}`]:!!t});return n.jsxs(E,{className:j,responsive:s,sticky:e,...N,children:[n.jsx(C,{}),n.jsx(H,{onChangeSort:p,...d}),!!l.length&&n.jsx(g,{data:l,keyField:o,rowClassName:i,renderRow:c,onSelectRow:r,selected:u}),m,x]})}w.displayName="SortableTable";function A({fields:a,currentSort:t,...s}){return n.jsx(y,{initialFields:a,initialSort:t,children:n.jsx(w,{...s})})}A.displayName="StandaloneSortableTable";const J=[10,25,50,100,250,500,1e3];function P({value:a,pageValues:t=J,size:s,label:e,className:l,onChange:o,...i}){const c=h.useId(),r=m=>o(Number(m.target.value)),u=l??b("form-select",{[`form-select-${s}`]:!!s}),d=b("input-group",{[`input-group-${s}`]:!!s});return n.jsxs("div",{className:d,children:[n.jsx("label",{className:"input-group-text",htmlFor:c,children:e??"Rows"}),n.jsx("select",{className:u,id:c,value:a,onChange:r,...i,children:t.map(m=>n.jsx("option",{value:m,children:m},m))})]},a)}P.displayName="RowsPerPage";function V({page:a,rowsPerPage:t,onChangePage:s,count:e,size:l,showFirst:o,showLast:i,className:c,rowsPerPageProps:r,...u}){const d=e===0?0:a*t+1,m=Math.min(a*t+t,e),x=t===0?0:Math.floor((e-1)/t),p=b("btn btn-link",{[`btn-${l}`]:!!l});return n.jsxs("div",{className:b("row g-3 justify-content-end",c),...u,children:[!!r&&n.jsx("div",{className:"col-auto",children:n.jsx(P,{...r,value:t,size:l})}),n.jsx("div",{className:"col-auto",children:n.jsxs("div",{className:"row g-3 flex-nowrap align-items-baseline",children:[n.jsxs("div",{className:"col-auto",children:[d,"-",m," of ",e]}),o&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:p,disabled:a===0,onClick:()=>s(0),"aria-label":"First page",children:n.jsx("span",{className:"bi-chevron-bar-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:p,disabled:a===0,onClick:()=>s(a-1),"aria-label":"Previous page",children:n.jsx("span",{className:"bi-chevron-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:p,disabled:a>=x,onClick:()=>s(a+1),"aria-label":"Next page",children:n.jsx("span",{className:"bi-chevron-right","aria-hidden":"true"})})}),i&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:p,disabled:a>=x,onClick:()=>s(x),"aria-label":"Last page",children:n.jsx("span",{className:"bi-chevron-bar-right","aria-hidden":"true"})})})]})})]})}V.displayname="TablePagination";const L=S.col`
    &.col-collapsed {
        visibility: collapse;
    }
`;function C(){const[a]=f();return n.jsx("colgroup",{children:a.map((t,s)=>n.jsx(L,{className:b(t.colClassName,{"col-collapsed":t.collapse}),span:t.colSpan??1},s))})}C.displayName="DataTableCols";function O(a){const t=h.useContext(T);if(!t)throw new Error("useField must be used within a DataTableProvider");return[t.fields.find(s=>s.id===a)??null,t.updateField]}function W(){const a=h.useContext(T);if(!a)throw new Error("useTableContext must be used within a DataTableProvider");return a}exports.DataTable=q;exports.DataTableCols=C;exports.DataTableContext=T;exports.DataTableProvider=y;exports.DataTableRow=k;exports.DataTableTBody=g;exports.DataTableTH=v;exports.DataTableWithContext=D;exports.RowsPerPage=P;exports.SortableTable=w;exports.SortableTableHead=H;exports.SortableTableTH=$;exports.StandaloneSortableTable=A;exports.TablePagination=V;exports.useField=O;exports.useTableContext=W;exports.useTableFields=f;exports.useTableSort=_;
//# sourceMappingURL=index.cjs.js.map
