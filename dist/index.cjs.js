"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("react/jsx-runtime"),m=require("react"),C=require("@emotion/styled"),j=m.createContext(null);function g({children:e,initialFields:t=[]}){const[a,n]=m.useState(t),l=m.useCallback(i=>{n(i)},[]),o=m.useCallback((i,u)=>{const b=a.map(d=>d.id===i?{...d,...u}:d);n(b)},[a]),c=m.useCallback(i=>a.find(u=>u.id===i),[a]),r=m.useMemo(()=>({fields:a,setFields:l,updateField:o,getField:c}),[a,l,o,c]);return s.jsx(j.Provider,{value:r,children:e})}function F(){const e=m.useContext(j);if(!e)throw new Error("useTableContext must be used within a FieldsProvider");return e}function f(){return F().fields}function V(e){const t=m.useContext(j);if(!t)throw new Error("useTableContext must be used within a FieldsProvider");return t.fields.find(n=>n.id===e)??null}function G(){return m.useContext(j)!==null}function R(e){var t,a,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(a=R(e[t]))&&(n&&(n+=" "),n+=a)}else for(a in e)e[a]&&(n&&(n+=" "),n+=a);return n}function x(){for(var e,t,a=0,n="",l=arguments.length;a<l;a++)(e=arguments[a])&&(t=R(e))&&(n&&(n+=" "),n+=t);return n}const H=C.table`
    --table-sticky-top: ${e=>e.sticky?"0":void 0};

    thead {
        tr:nth-of-type(1) td,
        tr:nth-of-type(1) th {
            top: var(--table-sticky-top, unset);
            position: ${e=>e.sticky?"sticky":"unset"};
            z-index: ${e=>e.sticky?10:"unset"};
            background: ${e=>e.sticky?"linear-gradient(var(--bs-table-bg) 75%, rgba(var(--bs-secondary-bg-rgb), 0.9))":"unset"};
        }
    }
`,w=m.forwardRef(function({sticky:t,responsive:a,children:n,className:l,...o},c){if(a){const r=x(l,{"table-responsive":a===!0,[`table-responsive-${a}`]:a!==!0});return s.jsx("div",{className:r,children:s.jsx(H,{ref:c,...o,children:n})})}return s.jsx(H,{className:l,sticky:t,ref:c,...o,children:n})});function N({field:e,className:t,children:a,...n}){const l=x({[`text-${e.align}`]:!!e.align},t);return s.jsx("th",{className:l,scope:"col",...n,children:a??e.title})}N.displayName="DataTableTH";function P({...e}){const t=f();return s.jsx("thead",{...e,children:s.jsx("tr",{children:t.map((a,n)=>s.jsx(N,{...a.thProps,field:a,className:x(typeof a.className=="function"?{[`text-${a.align}`]:!!a.align}:a.className)},a.id??n))})})}P.displayName="DataTableHead";function M({className:e,size:t,responsive:a,sticky:n,data:l,keyField:o,rowClassName:c,renderRow:r,onSelectRow:i,selected:u,tableHeadProps:b,children:d,tfoot:p,...h}){const v=x("table",e,{[`table-${t}`]:!!t});return s.jsxs(w,{sticky:n,responsive:a,className:v,...h,children:[s.jsx(y,{}),s.jsx(P,{...b}),!!l.length&&s.jsx(T,{data:l,keyField:o,rowClassName:c,renderRow:r,onSelectRow:i,selected:u}),d,p]})}function W({fields:e,...t}){return s.jsx(g,{initialFields:e,children:s.jsx(M,{...t})})}W.displayName="DataTable";function I({field:e,row:t,className:a,as:n,...l}){const o=x({[`text-${e.align}`]:!!e.align},a,typeof e.className=="function"?e.className(t):e.className);return m.createElement(n??e.as??"td",{className:o,scope:(n??e.as)==="th"?"row":void 0,colSpan:e.colSpan,...e.cellProps,...l},t[e.field]===void 0&&!e.render?null:typeof e.render=="function"?e.render(t):t[e.field])}function D({className:e,rowClassName:t,selected:a,row:n,trRef:l,onClick:o,...c}){const r=f(),i=b=>{o?.(n,b)},u=typeof t=="function"?t(n):t;return n?s.jsx("tr",{ref:l,className:x({"table-active":a},e,u),onClick:i,...c,children:r.map((b,d)=>s.jsx(I,{field:b,row:n},b?.id??d))}):null}D.displayName="DataTableRow";function T({data:e,keyField:t,rowClassName:a,renderRow:n,onSelectRow:l,selected:o="",children:c,...r}){return s.jsxs("tbody",{...r,children:[e.map(i=>{const u=String(typeof t=="function"?t(i):i[t]),b=typeof o=="function"?o(i):u===o;return n?n(i):s.jsx(D,{onClick:l,rowClassName:a,row:i,selected:b},u)}),c]})}T.displayName="DataTableTBody";const J=e=>{if(!e)return"flex-start";switch(e){case"end":return"flex-end";default:return"center"}},L=C.div`
    display: flex;
    width: 100%;
    flex-direction: ${e=>e.align==="end"?"row-reverse":"row"};
    justify-content: ${e=>J(e.align)};

    .sort-icon {
        flex-grow: ${e=>e.align==="end"?"1":"0"};
        opacity: ${e=>e.sorted?1:0};
    }

    &:hover .sort-icon {
        color: ${e=>e.sorted?"unset":"var(--bs-primary)"};
        opacity: 0.75;
        transition: opacity 0.2s;
    }
`;function S({field:e,sorted:t,ascending:a,className:n,onClick:l}){if(!e.sortable)return s.jsx(N,{field:e,className:n});const{className:o,...c}=e.thProps??{},r=x(n,o,{[`text-${e.align}`]:!!e.align}),i=()=>{l({field:e.field,ascending:t?!a:!0})},u={"bi-arrow-down":a,"bi-arrow-up":!a};return s.jsx("th",{...c,className:x("sortable",r),scope:"col",onClick:i,children:s.jsxs(L,{sorted:t,align:e.align,children:[s.jsx("div",{className:"field-title",children:e.title}),s.jsx("div",{className:x("me-1 sort-icon",u)})]})})}S.displayName="SortableTableTH";function k({currentSort:e,onChangeSort:t}){const a=f(),{field:n,ascending:l}=e;return s.jsx("thead",{children:s.jsx("tr",{children:a.map((o,c)=>s.jsx(S,{field:o,sorted:n===o.field,ascending:l,className:x(typeof o.className=="function"?{[`text-${o.align}`]:!!o.align}:o.className),onClick:t},c))})})}k.displayName="SortableTableHead";function q({className:e,size:t,responsive:a,sticky:n,data:l,keyField:o,rowClassName:c,renderRow:r,onSelectRow:i,selected:u,tableHeadProps:b,children:d,tfoot:p,currentSort:h,onChangeSort:v,..._}){const A=x("table",e,{[`table-${t}`]:!!t});return s.jsxs(w,{className:A,responsive:a,sticky:n,..._,children:[s.jsx(y,{}),s.jsx(k,{currentSort:h,onChangeSort:v,...b}),!!l.length&&s.jsx(T,{data:l,keyField:o,rowClassName:c,renderRow:r,onSelectRow:i,selected:u}),d,p]})}function B({fields:e,...t}){return s.jsx(g,{initialFields:e,children:s.jsx(q,{...t})})}B.displayName="SortableTable";const O=[10,25,50,100,250,500,1e3];function $({value:e,pageValues:t=O,size:a,label:n,className:l,onChange:o,...c}){const r=m.useId(),i=d=>o(Number(d.target.value)),u=l??x("form-select",{[`form-select-${a}`]:!!a}),b=x("input-group",{[`input-group-${a}`]:!!a});return s.jsxs("div",{className:b,children:[s.jsx("label",{className:"input-group-text",htmlFor:r,children:n??"Rows"}),s.jsx("select",{className:u,id:r,value:e,onChange:i,...c,children:t.map(d=>s.jsx("option",{value:d,children:d},d))})]},e)}$.displayName="RowsPerPage";function E({page:e,rowsPerPage:t,onChangePage:a,count:n,size:l,showFirst:o,showLast:c,className:r,rowsPerPageProps:i,...u}){const b=n===0?0:e*t+1,d=Math.min(e*t+t,n),p=t===0?0:Math.floor((n-1)/t),h=x("btn btn-link",{[`btn-${l}`]:!!l});return s.jsxs("div",{className:x("row g-3 justify-content-end",r),...u,children:[!!i&&s.jsx("div",{className:"col-auto",children:s.jsx($,{...i,value:t,size:l})}),s.jsx("div",{className:"col-auto",children:s.jsxs("div",{className:"row g-3 flex-nowrap align-items-baseline",children:[s.jsxs("div",{className:"col-auto",children:[b,"-",d," of ",n]}),o&&s.jsx("div",{className:"col-auto",children:s.jsx("button",{className:h,disabled:e===0,onClick:()=>a(0),"aria-label":"First page",children:s.jsx("span",{className:"bi-chevron-bar-left","aria-hidden":"true"})})}),s.jsx("div",{className:"col-auto",children:s.jsx("button",{className:h,disabled:e===0,onClick:()=>a(e-1),"aria-label":"Previous page",children:s.jsx("span",{className:"bi-chevron-left","aria-hidden":"true"})})}),s.jsx("div",{className:"col-auto",children:s.jsx("button",{className:h,disabled:e>=p,onClick:()=>a(e+1),"aria-label":"Next page",children:s.jsx("span",{className:"bi-chevron-right","aria-hidden":"true"})})}),c&&s.jsx("div",{className:"col-auto",children:s.jsx("button",{className:h,disabled:e>=p,onClick:()=>a(p),"aria-label":"Last page",children:s.jsx("span",{className:"bi-chevron-bar-right","aria-hidden":"true"})})})]})})]})}E.displayname="TablePagination";const K=C.col`
    &.col-collapsed {
        visibility: collapse;
    }
`;function y(){const e=f();return s.jsx("colgroup",{children:e.map((t,a)=>s.jsx(K,{className:x(t.colClassName,{"col-collapsed":t.collapse}),span:t.colSpan??1},a))})}y.displayName="DataTableCols";exports.DataTable=W;exports.DataTableCols=y;exports.DataTableProvider=g;exports.DataTableRow=D;exports.DataTableTBody=T;exports.DataTableTH=N;exports.DataTableWithContext=M;exports.RowsPerPage=$;exports.SortableTable=B;exports.SortableTableHead=k;exports.SortableTableTH=S;exports.SortableTableWithContext=q;exports.TablePagination=E;exports.useField=V;exports.useHasTableFieldsContext=G;exports.useTableContext=F;exports.useTableFields=f;
//# sourceMappingURL=index.cjs.js.map
