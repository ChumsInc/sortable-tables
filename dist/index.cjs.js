"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),m=require("react"),R=require("@emotion/styled"),p=m.createContext(null);function y({children:e,initialFields:t=[],initialSort:s=null}){const[a,l]=m.useState(t),[r,i]=m.useState(s),c=m.useCallback(x=>{l(x)},[]),o=m.useCallback(x=>{i(x)},[]),u=m.useCallback((x,f)=>{const T=a.map(N=>N.id===x?{...N,...f}:N);l(T)},[a]),d=m.useCallback(x=>a.find(f=>f.id===x),[a]),b=m.useMemo(()=>({fields:a,setFields:c,sort:r,setSort:o,getField:d,updateField:u}),[a,c,r,o,u,d]);return n.jsx(p.Provider,{value:b,children:e})}y.displayName="DataTableProvider";function E(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(s=E(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function h(){for(var e,t,s=0,a="",l=arguments.length;s<l;s++)(e=arguments[s])&&(t=E(e))&&(a&&(a+=" "),a+=t);return a}const F=R.table`
    --table-sticky-top: ${e=>e.sticky?"0":void 0};

    thead {
        tr:nth-of-type(1) td,
        tr:nth-of-type(1) th {
            top: var(--table-sticky-top, unset);
            position: ${e=>e.sticky?"sticky":"unset"};
            z-index: ${e=>e.sticky?10:"unset"};
            background: ${e=>e.sticky?"linear-gradient(var(--bs-table-bg) 75%, rgba(var(--bs-secondary-bg-rgb), 0.9))":"unset"};
        }
    }
`;function M({sticky:e,responsive:t,children:s,className:a,ref:l,...r}){if(t){const i=h(a,{"table-responsive":t===!0,[`table-responsive-${t}`]:t!==!0});return n.jsx("div",{className:i,children:n.jsx(F,{ref:l,...r,children:s})})}return n.jsx(F,{className:a,sticky:e,ref:l,...r,children:s})}function v({field:e,className:t,children:s,...a}){if(e.visible===!1)return null;const l=h({[`text-${e.align}`]:!!e.align},t);return n.jsx("th",{className:l,scope:"col",...a,children:s??e.title})}v.displayName="DataTableTH";function j(){const e=m.useContext(p);if(!e)throw new Error("useTableContext must be used within a DataTableProvider");return[e.fields,e.setFields]}function q({...e}){const[t]=j();return n.jsx("thead",{...e,children:n.jsx("tr",{children:t.map((s,a)=>n.jsx(v,{...s.thProps,field:s,className:h(typeof s.className=="function"?{[`text-${s.align}`]:!!s.align}:s.className)},String(s.id??a)))})})}q.displayName="DataTableHead";function C({className:e,size:t,responsive:s,sticky:a,data:l,keyField:r,rowClassName:i,renderRow:c,onSelectRow:o,selected:u,tableHeadProps:d,children:b,tfoot:x,...f}){const T=h("table",e,{[`table-${t}`]:!!t});return n.jsxs(M,{sticky:a,responsive:s,className:T,...f,children:[n.jsx(S,{}),n.jsx(q,{...d}),!!l.length&&n.jsx(g,{data:l,keyField:r,rowClassName:i,renderRow:c,onSelectRow:o,selected:u}),b,x]})}C.displayName="DataTable";function B({fields:e,...t}){return n.jsx(y,{initialFields:e,children:n.jsx(C,{...t})})}B.displayName="StandaloneDataTable";function _({field:e,row:t,className:s,as:a,...l}){if(e.visible===!1)return null;const r=h({[`text-${e.align}`]:!!e.align},s,typeof e.className=="function"?e.className(t):e.className);return m.createElement(a??e.as??"td",{className:r,scope:(a??e.as)==="th"?"row":void 0,colSpan:e.colSpan,...e.cellProps,...l},t[e.field]===void 0&&!e.render?null:typeof e.render=="function"?e.render(t):t[e.field])}_.displayName="DataTableCell";function D({className:e,rowClassName:t,selected:s,row:a,trRef:l,onClick:r,...i}){const[c]=j(),o=d=>{r?.(a,d)},u=typeof t=="function"?t(a):t;return a?n.jsx("tr",{ref:l,className:h({"table-active":s},e,u),onClick:o,...i,children:c.map((d,b)=>n.jsx(_,{field:d,row:a},String(d?.id??b)))}):null}D.displayName="DataTableRow";function g({data:e,keyField:t,rowClassName:s,renderRow:a,onSelectRow:l,selected:r="",children:i,...c}){return n.jsxs("tbody",{...c,children:[e.map(o=>{const u=String(typeof t=="function"?t(o):o[t]),d=typeof r=="function"?r(o):u===r;return a?a(o):n.jsx(D,{onClick:l,rowClassName:s,row:o,selected:d},u)}),i]})}g.displayName="DataTableTBody";const G=e=>{if(!e)return"flex-start";switch(e){case"end":return"flex-end";default:return"center"}},I=R.div`
    display: flex;
    width: 100%;
    flex-direction: ${e=>e.align==="end"?"row-reverse":"row"};
    justify-content: ${e=>G(e.align)};

    .sort-icon {
        flex-grow: ${e=>e.align==="end"?"1":"0"};
        opacity: ${e=>e.sorted?1:0};
    }

    &:hover .sort-icon {
        color: ${e=>e.sorted?"unset":"var(--bs-primary)"};
        opacity: 0.75;
        transition: opacity 0.2s;
    }
`;function k({field:e,sorted:t,ascending:s,className:a,onClick:l}){if(e.visible===!1)return null;if(!e.sortable)return n.jsx(v,{field:e,className:a});const{className:r,...i}=e.thProps??{},c=h(a,r,{[`text-${e.align}`]:!!e.align}),o=()=>{l({field:e.field,ascending:t?!s:!0})},u={"bi-arrow-down":s,"bi-arrow-up":!s};return n.jsx("th",{...i,className:h("sortable",c),scope:"col",onClick:o,children:n.jsxs(I,{sorted:t,align:e.align,children:[n.jsx("div",{className:"field-title",children:e.title}),n.jsx("div",{className:h("me-1 sort-icon",u)})]})})}k.displayName="SortableTableTH";function $(){const e=m.useContext(p);if(!e)throw new Error("useTableSort must be used within a DataTableProvider");return[e.sort,e.setSort]}function H({onChangeSort:e}){const[t]=j(),[s]=$();return n.jsx("thead",{children:n.jsx("tr",{children:t.map((a,l)=>n.jsx(k,{field:a,sorted:s?.field===a.field,ascending:s?.ascending,className:h(typeof a.className=="function"?{[`text-${a.align}`]:!!a.align}:a.className),onClick:e},l))})})}H.displayName="SortableTableHead";function w({className:e,size:t,responsive:s,sticky:a,data:l,keyField:r,rowClassName:i,renderRow:c,onSelectRow:o,selected:u,tableHeadProps:d,children:b,tfoot:x,onChangeSort:f,...T}){const N=h("table",e,{[`table-${t}`]:!!t});return n.jsxs(M,{className:N,responsive:s,sticky:a,...T,children:[n.jsx(S,{}),n.jsx(H,{onChangeSort:f,...d}),!!l.length&&n.jsx(g,{data:l,keyField:r,rowClassName:i,renderRow:c,onSelectRow:o,selected:u}),b,x]})}w.displayName="SortableTable";function J({nextSort:e}){const[,t]=$();return m.useEffect(()=>{t(e)},[e,t]),null}function A({fields:e,currentSort:t,...s}){return n.jsxs(y,{initialFields:e,initialSort:t,children:[n.jsx(J,{nextSort:t}),n.jsx(w,{...s})]})}A.displayName="StandaloneSortableTable";const L=[10,25,50,100,250,500,1e3];function P({value:e,pageValues:t=L,size:s,label:a,className:l,onChange:r,...i}){const c=m.useId(),o=b=>r(Number(b.target.value)),u=l??h("form-select",{[`form-select-${s}`]:!!s}),d=h("input-group",{[`input-group-${s}`]:!!s});return n.jsxs("div",{className:d,children:[n.jsx("label",{className:"input-group-text",htmlFor:c,children:a??"Rows"}),n.jsx("select",{className:u,id:c,value:e,onChange:o,...i,children:t.map(b=>n.jsx("option",{value:b,children:b},b))})]},e)}P.displayName="RowsPerPage";function V({page:e,rowsPerPage:t,onChangePage:s,count:a,size:l,showFirst:r,showLast:i,className:c,rowsPerPageProps:o,...u}){const d=a===0?0:e*t+1,b=Math.min(e*t+t,a),x=t===0?0:Math.floor((a-1)/t),f=h("btn btn-link",{[`btn-${l}`]:!!l});return n.jsxs("div",{className:h("row g-3 justify-content-end",c),...u,children:[!!o&&n.jsx("div",{className:"col-auto",children:n.jsx(P,{...o,value:t,size:l})}),n.jsx("div",{className:"col-auto",children:n.jsxs("div",{className:"row g-3 flex-nowrap align-items-baseline",children:[n.jsxs("div",{className:"col-auto",children:[d,"-",b," of ",a]}),r&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e===0,onClick:()=>s(0),"aria-label":"First page",children:n.jsx("span",{className:"bi-chevron-bar-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e===0,onClick:()=>s(e-1),"aria-label":"Previous page",children:n.jsx("span",{className:"bi-chevron-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e>=x,onClick:()=>s(e+1),"aria-label":"Next page",children:n.jsx("span",{className:"bi-chevron-right","aria-hidden":"true"})})}),i&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e>=x,onClick:()=>s(x),"aria-label":"Last page",children:n.jsx("span",{className:"bi-chevron-bar-right","aria-hidden":"true"})})})]})})]})}V.displayname="TablePagination";function S(){const[e]=j();return n.jsx("colgroup",{children:e.filter(t=>t.visible!==!1).map((t,s)=>n.jsx("col",{className:t.colClassName,span:t.colSpan??1},s))})}S.displayName="DataTableCols";function O(e){const t=m.useContext(p);if(!t)throw new Error("useField must be used within a DataTableProvider");return[t.fields.find(s=>s.id===e)??null,t.updateField]}function W(){const e=m.useContext(p);if(!e)throw new Error("useTableContext must be used within a DataTableProvider");return e}exports.DataTable=B;exports.DataTableCols=S;exports.DataTableContext=p;exports.DataTableProvider=y;exports.DataTableRow=D;exports.DataTableTBody=g;exports.DataTableTH=v;exports.DataTableWithContext=C;exports.RowsPerPage=P;exports.SortableTable=w;exports.SortableTableHead=H;exports.SortableTableTH=k;exports.StandaloneSortableTable=A;exports.TablePagination=V;exports.useField=O;exports.useTableContext=W;exports.useTableFields=j;exports.useTableSort=$;
//# sourceMappingURL=index.cjs.js.map
