"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("react/jsx-runtime"),h=require("react"),F=require("@emotion/styled"),p=h.createContext(null);function y({children:e,initialFields:a=[],initialSort:s=null}){const[t,l]=h.useState(a),[r,c]=h.useState(s),u=h.useCallback(m=>{l(m)},[]),i=h.useCallback(m=>{c(m)},[]),d=h.useCallback((m,f)=>{const T=t.map(N=>N.id===m?{...N,...f}:N);l(T)},[t]),o=h.useCallback(m=>t.find(f=>f.id===m),[t]),b=h.useMemo(()=>({fields:t,setFields:u,sort:r,setSort:i,getField:o,updateField:d}),[t,u,r,i,d,o]);return n.jsx(p.Provider,{value:b,children:e})}y.displayName="DataTableProvider";function R(e){var a,s,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(a=0;a<l;a++)e[a]&&(s=R(e[a]))&&(t&&(t+=" "),t+=s)}else for(s in e)e[s]&&(t&&(t+=" "),t+=s);return t}function x(){for(var e,a,s=0,t="",l=arguments.length;s<l;s++)(e=arguments[s])&&(a=R(e))&&(t&&(t+=" "),t+=a);return t}const P=F.table`
    --table-sticky-top: ${e=>e.sticky?"0":void 0};

    thead {
        tr:nth-of-type(1) td,
        tr:nth-of-type(1) th {
            top: var(--table-sticky-top, unset);
            position: ${e=>e.sticky?"sticky":"unset"};
            z-index: ${e=>e.sticky?10:"unset"};
            background: ${e=>e.sticky?"linear-gradient(var(--bs-table-bg) 75%, rgba(var(--bs-secondary-bg-rgb), 0.9))":"unset"};
        }
    }
`;function E({sticky:e,responsive:a,children:s,className:t,ref:l,...r}){if(a){const c=x(t,{"table-responsive":a===!0,[`table-responsive-${a}`]:a!==!0});return n.jsx("div",{className:c,children:n.jsx(P,{ref:l,...r,children:s})})}return n.jsx(P,{className:t,sticky:e,ref:l,...r,children:s})}function v({field:e,className:a,children:s,...t}){const l=x({[`text-${e.align}`]:!!e.align},a);return n.jsx("th",{className:l,scope:"col",...t,children:s??e.title})}v.displayName="DataTableTH";function j(){const e=h.useContext(p);if(!e)throw new Error("useTableContext must be used within a DataTableProvider");return[e.fields,e.setFields]}function M({...e}){const[a]=j();return n.jsx("thead",{...e,children:n.jsx("tr",{children:a.filter(s=>s.visible!==!1).map((s,t)=>n.jsx(v,{...s.thProps,field:s,className:x(typeof s.className=="function"?{[`text-${s.align}`]:!!s.align}:s.className)},String(s.id??t)))})})}M.displayName="DataTableHead";function C({className:e,size:a,responsive:s,sticky:t,data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:i,selected:d,tableHeadProps:o,children:b,tfoot:m,...f}){const T=x("table",e,{[`table-${a}`]:!!a});return n.jsxs(E,{sticky:t,responsive:s,className:T,...f,children:[n.jsx(S,{}),n.jsx(M,{...o}),!!l.length&&n.jsx(g,{data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:i,selected:d}),b,m]})}C.displayName="DataTable";function q({fields:e,...a}){return n.jsx(y,{initialFields:e,children:n.jsx(C,{...a})})}q.displayName="StandaloneDataTable";function B({field:e,row:a,className:s,as:t,...l}){const r=x({[`text-${e.align}`]:!!e.align},s,typeof e.className=="function"?e.className(a):e.className);return h.createElement(t??e.as??"td",{className:r,scope:(t??e.as)==="th"?"row":void 0,colSpan:e.colSpan,...e.cellProps,...l},a[e.field]===void 0&&!e.render?null:typeof e.render=="function"?e.render(a):a[e.field])}B.displayName="DataTableCell";function D({className:e,rowClassName:a,selected:s,row:t,trRef:l,onClick:r,...c}){const[u]=j(),i=o=>{r?.(t,o)},d=typeof a=="function"?a(t):a;return t?n.jsx("tr",{ref:l,className:x({"table-active":s},e,d),onClick:i,...c,children:u.filter(o=>o.visible!==!1).map((o,b)=>n.jsx(B,{field:o,row:t},String(o?.id??b)))}):null}D.displayName="DataTableRow";function g({data:e,keyField:a,rowClassName:s,renderRow:t,onSelectRow:l,selected:r="",children:c,...u}){return n.jsxs("tbody",{...u,children:[e.map(i=>{const d=String(typeof a=="function"?a(i):i[a]),o=typeof r=="function"?r(i):d===r;return t?t(i):n.jsx(D,{onClick:l,rowClassName:s,row:i,selected:o},d)}),c]})}g.displayName="DataTableTBody";const G=e=>{if(!e)return"flex-start";switch(e){case"end":return"flex-end";default:return"center"}},I=F.div`
    display: flex;
    width: 100%;
    flex-direction: ${e=>e.align==="end"?"row-reverse":"row"};
    justify-content: ${e=>G(e.align)};

    .sort-icon {
        flex-grow: ${e=>e.align==="end"?"1":"0"};
        opacity: ${e=>e.sorted?1:0};
    }

    &:hover .sort-icon {
        color: ${e=>e.sorted?"unset":"var(--bs-primary)"};
        opacity: 0.75;
        transition: opacity 0.2s;
    }
`;function k({field:e,sorted:a,ascending:s,className:t,onClick:l}){if(!e.sortable)return n.jsx(v,{field:e,className:t});const{className:r,...c}=e.thProps??{},u=x(t,r,{[`text-${e.align}`]:!!e.align}),i=()=>{l({field:e.field,ascending:a?!s:!0})},d={"bi-arrow-down":s,"bi-arrow-up":!s};return n.jsx("th",{...c,className:x("sortable",u),scope:"col",onClick:i,children:n.jsxs(I,{sorted:a,align:e.align,children:[n.jsx("div",{className:"field-title",children:e.title}),n.jsx("div",{className:x("me-1 sort-icon",d)})]})})}k.displayName="SortableTableTH";function _(){const e=h.useContext(p);if(!e)throw new Error("useTableSort must be used within a DataTableProvider");return[e.sort,e.setSort]}function $({onChangeSort:e}){const[a]=j(),[s]=_();return n.jsx("thead",{children:n.jsx("tr",{children:a.filter(t=>t.visible!==!1).map((t,l)=>n.jsx(k,{field:t,sorted:s?.field===t.field,ascending:s?.ascending,className:x(typeof t.className=="function"?{[`text-${t.align}`]:!!t.align}:t.className),onClick:e},l))})})}$.displayName="SortableTableHead";function H({className:e,size:a,responsive:s,sticky:t,data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:i,selected:d,tableHeadProps:o,children:b,tfoot:m,onChangeSort:f,...T}){const N=x("table",e,{[`table-${a}`]:!!a});return n.jsxs(E,{className:N,responsive:s,sticky:t,...T,children:[n.jsx(S,{}),n.jsx($,{onChangeSort:f,...o}),!!l.length&&n.jsx(g,{data:l,keyField:r,rowClassName:c,renderRow:u,onSelectRow:i,selected:d}),b,m]})}H.displayName="SortableTable";function A({fields:e,currentSort:a,...s}){return n.jsx(y,{initialFields:e,initialSort:a,children:n.jsx(H,{...s})})}A.displayName="StandaloneSortableTable";const J=[10,25,50,100,250,500,1e3];function w({value:e,pageValues:a=J,size:s,label:t,className:l,onChange:r,...c}){const u=h.useId(),i=b=>r(Number(b.target.value)),d=l??x("form-select",{[`form-select-${s}`]:!!s}),o=x("input-group",{[`input-group-${s}`]:!!s});return n.jsxs("div",{className:o,children:[n.jsx("label",{className:"input-group-text",htmlFor:u,children:t??"Rows"}),n.jsx("select",{className:d,id:u,value:e,onChange:i,...c,children:a.map(b=>n.jsx("option",{value:b,children:b},b))})]},e)}w.displayName="RowsPerPage";function V({page:e,rowsPerPage:a,onChangePage:s,count:t,size:l,showFirst:r,showLast:c,className:u,rowsPerPageProps:i,...d}){const o=t===0?0:e*a+1,b=Math.min(e*a+a,t),m=a===0?0:Math.floor((t-1)/a),f=x("btn btn-link",{[`btn-${l}`]:!!l});return n.jsxs("div",{className:x("row g-3 justify-content-end",u),...d,children:[!!i&&n.jsx("div",{className:"col-auto",children:n.jsx(w,{...i,value:a,size:l})}),n.jsx("div",{className:"col-auto",children:n.jsxs("div",{className:"row g-3 flex-nowrap align-items-baseline",children:[n.jsxs("div",{className:"col-auto",children:[o,"-",b," of ",t]}),r&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e===0,onClick:()=>s(0),"aria-label":"First page",children:n.jsx("span",{className:"bi-chevron-bar-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e===0,onClick:()=>s(e-1),"aria-label":"Previous page",children:n.jsx("span",{className:"bi-chevron-left","aria-hidden":"true"})})}),n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e>=m,onClick:()=>s(e+1),"aria-label":"Next page",children:n.jsx("span",{className:"bi-chevron-right","aria-hidden":"true"})})}),c&&n.jsx("div",{className:"col-auto",children:n.jsx("button",{className:f,disabled:e>=m,onClick:()=>s(m),"aria-label":"Last page",children:n.jsx("span",{className:"bi-chevron-bar-right","aria-hidden":"true"})})})]})})]})}V.displayname="TablePagination";function S(){const[e]=j();return n.jsx("colgroup",{children:e.filter(a=>a.visible!==!1).map((a,s)=>n.jsx("col",{className:a.colClassName,span:a.colSpan??1},s))})}S.displayName="DataTableCols";function L(e){const a=h.useContext(p);if(!a)throw new Error("useField must be used within a DataTableProvider");return[a.fields.find(s=>s.id===e)??null,a.updateField]}function O(){const e=h.useContext(p);if(!e)throw new Error("useTableContext must be used within a DataTableProvider");return e}exports.DataTable=q;exports.DataTableCols=S;exports.DataTableContext=p;exports.DataTableProvider=y;exports.DataTableRow=D;exports.DataTableTBody=g;exports.DataTableTH=v;exports.DataTableWithContext=C;exports.RowsPerPage=w;exports.SortableTable=H;exports.SortableTableHead=$;exports.SortableTableTH=k;exports.StandaloneSortableTable=A;exports.TablePagination=V;exports.useField=L;exports.useTableContext=O;exports.useTableFields=j;exports.useTableSort=_;
//# sourceMappingURL=index.cjs.js.map
